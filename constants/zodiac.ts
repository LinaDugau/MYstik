export interface ZodiacSign {
  name: string;
  symbol: string;
  dates: string;
  element: string;
  stones: string[];
  totem: string;
  horoscope: {
    today: string;
    week: string;
    month: string;
  };
  compatibility: {
    best: string[];
    good: string[];
    challenging: string[];
  };
}

export const ZODIAC_SIGNS: Record<string, ZodiacSign> = {
  aries: {
    name: "Овен",
    symbol: "♈",
    dates: "21 марта - 19 апреля",
    element: "Огонь",
    stones: ["Алмаз", "Рубин", "Яшма"],
    totem: "Ястреб",
    horoscope: {
      today: "Сегодня ваша энергия на пике. Используйте этот день для начала новых проектов и смелых инициатив. Удача на вашей стороне.",
      week: "Неделя обещает быть динамичной. Возможны неожиданные возможности в карьере. Будьте готовы к быстрым решениям.",
      month: "Месяц трансформаций и новых начинаний. Ваша решительность поможет преодолеть любые препятствия.",
    },
    compatibility: {
      best: ["Лев", "Стрелец"],
      good: ["Близнецы", "Водолей"],
      challenging: ["Рак", "Козерог"],
    },
  },
  taurus: {
    name: "Телец",
    symbol: "♉",
    dates: "20 апреля - 20 мая",
    element: "Земля",
    stones: ["Изумруд", "Сапфир", "Агат"],
    totem: "Бобр",
    horoscope: {
      today: "День благоприятен для финансовых решений. Ваша практичность поможет найти выгодные возможности.",
      week: "Стабильная неделя с акцентом на комфорт и безопасность. Хорошее время для домашних дел.",
      month: "Месяц материального роста и укрепления позиций. Инвестиции принесут плоды.",
    },
    compatibility: {
      best: ["Дева", "Козерог"],
      good: ["Рак", "Рыбы"],
      challenging: ["Лев", "Водолей"],
    },
  },
  gemini: {
    name: "Близнецы",
    symbol: "♊",
    dates: "21 мая - 20 июня",
    element: "Воздух",
    stones: ["Агат", "Цитрин", "Тигровый глаз"],
    totem: "Бабочка",
    horoscope: {
      today: "Коммуникация - ваш ключ к успеху сегодня. Новые знакомства откроют интересные перспективы.",
      week: "Неделя полна общения и новой информации. Возможны короткие поездки и встречи.",
      month: "Месяц интеллектуального роста. Обучение и саморазвитие принесут отличные результаты.",
    },
    compatibility: {
      best: ["Весы", "Водолей"],
      good: ["Овен", "Лев"],
      challenging: ["Дева", "Рыбы"],
    },
  },
  cancer: {
    name: "Рак",
    symbol: "♋",
    dates: "21 июня - 22 июля",
    element: "Вода",
    stones: ["Лунный камень", "Жемчуг", "Изумруд"],
    totem: "Краб",
    horoscope: {
      today: "Эмоциональная гармония поможет решить семейные вопросы. Доверьтесь интуиции.",
      week: "Неделя семейных ценностей и домашнего уюта. Укрепление близких отношений.",
      month: "Месяц эмоционального обновления. Забота о близких принесет радость.",
    },
    compatibility: {
      best: ["Скорпион", "Рыбы"],
      good: ["Телец", "Дева"],
      challenging: ["Овен", "Весы"],
    },
  },
  leo: {
    name: "Лев",
    symbol: "♌",
    dates: "23 июля - 22 августа",
    element: "Огонь",
    stones: ["Рубин", "Янтарь", "Топаз"],
    totem: "Лев",
    horoscope: {
      today: "Ваша харизма притягивает успех. Время блистать и показывать свои таланты.",
      week: "Неделя творческого подъема и признания. Ваши усилия будут замечены и оценены.",
      month: "Месяц лидерства и достижений. Смело берите инициативу в свои руки.",
    },
    compatibility: {
      best: ["Овен", "Стрелец"],
      good: ["Близнецы", "Весы"],
      challenging: ["Телец", "Скорпион"],
    },
  },
  virgo: {
    name: "Дева",
    symbol: "♍",
    dates: "23 августа - 22 сентября",
    element: "Земля",
    stones: ["Сапфир", "Яшма", "Сердолик"],
    totem: "Сова",
    horoscope: {
      today: "Внимание к деталям принесет успех. Организованность - ваш козырь сегодня.",
      week: "Продуктивная неделя для работы и здоровья. Время навести порядок во всех сферах.",
      month: "Месяц совершенствования и улучшений. Ваш труд будет вознагражден.",
    },
    compatibility: {
      best: ["Телец", "Козерог"],
      good: ["Рак", "Скорпион"],
      challenging: ["Близнецы", "Стрелец"],
    },
  },
  libra: {
    name: "Весы",
    symbol: "♎",
    dates: "23 сентября - 22 октября",
    element: "Воздух",
    stones: ["Опал", "Лазурит", "Аквамарин"],
    totem: "Лебедь",
    horoscope: {
      today: "Гармония в отношениях - главный приоритет. Компромиссы приведут к успеху.",
      week: "Неделя партнерства и сотрудничества. Совместные проекты будут успешными.",
      month: "Месяц баланса и красоты. Время для творчества и романтики.",
    },
    compatibility: {
      best: ["Близнецы", "Водолей"],
      good: ["Лев", "Стрелец"],
      challenging: ["Рак", "Козерог"],
    },
  },
  scorpio: {
    name: "Скорпион",
    symbol: "♏",
    dates: "23 октября - 21 ноября",
    element: "Вода",
    stones: ["Топаз", "Обсидиан", "Гранат"],
    totem: "Скорпион",
    horoscope: {
      today: "Интенсивность чувств поможет достичь целей. Трансформация уже началась.",
      week: "Неделя глубоких перемен и открытий. Тайное станет явным.",
      month: "Месяц страсти и возрождения. Отпустите прошлое и примите новое.",
    },
    compatibility: {
      best: ["Рак", "Рыбы"],
      good: ["Дева", "Козерог"],
      challenging: ["Лев", "Водолей"],
    },
  },
  sagittarius: {
    name: "Стрелец",
    symbol: "♐",
    dates: "22 ноября - 21 декабря",
    element: "Огонь",
    stones: ["Бирюза", "Лазурит", "Аметист"],
    totem: "Орел",
    horoscope: {
      today: "Приключения зовут! Расширяйте горизонты и не бойтесь нового опыта.",
      week: "Неделя путешествий и обучения. Новые знания откроют двери возможностей.",
      month: "Месяц свободы и исследований. Философский подход поможет найти ответы.",
    },
    compatibility: {
      best: ["Овен", "Лев"],
      good: ["Весы", "Водолей"],
      challenging: ["Дева", "Рыбы"],
    },
  },
  capricorn: {
    name: "Козерог",
    symbol: "♑",
    dates: "22 декабря - 19 января",
    element: "Земля",
    stones: ["Гранат", "Оникс", "Обсидиан"],
    totem: "Горный козел",
    horoscope: {
      today: "Упорство и дисциплина приведут к вершине. Не сдавайтесь перед препятствиями.",
      week: "Неделя карьерного роста и достижений. Ваш труд будет оценен руководством.",
      month: "Месяц амбиций и успеха. Долгосрочные планы начнут воплощаться.",
    },
    compatibility: {
      best: ["Телец", "Дева"],
      good: ["Скорпион", "Рыбы"],
      challenging: ["Овен", "Весы"],
    },
  },
  aquarius: {
    name: "Водолей",
    symbol: "♒",
    dates: "20 января - 18 февраля",
    element: "Воздух",
    stones: ["Аметист", "Гранат", "Бирюза"],
    totem: "Дельфин",
    horoscope: {
      today: "Инновационные идеи принесут прорыв. Будьте оригинальны и независимы.",
      week: "Неделя дружбы и командной работы. Коллективные проекты будут успешными.",
      month: "Месяц революционных перемен. Ваше видение будущего вдохновит других.",
    },
    compatibility: {
      best: ["Близнецы", "Весы"],
      good: ["Овен", "Стрелец"],
      challenging: ["Телец", "Скорпион"],
    },
  },
  pisces: {
    name: "Рыбы",
    symbol: "♓",
    dates: "19 февраля - 20 марта",
    element: "Вода",
    stones: ["Аквамарин", "Аметист", "Лунный камень"],
    totem: "Рыба",
    horoscope: {
      today: "Творческое вдохновение на пике. Доверьтесь интуиции и создавайте красоту.",
      week: "Неделя духовного роста и сострадания. Помощь другим принесет удовлетворение.",
      month: "Месяц мечтаний и воплощений. Визуализация поможет достичь желаемого.",
    },
    compatibility: {
      best: ["Рак", "Скорпион"],
      good: ["Телец", "Козерог"],
      challenging: ["Близнецы", "Стрелец"],
    },
  },
};

export function getZodiacSign(birthDate: string): string | null {
  const regex = /^(\d{2})\.(\d{2})\.(\d{4})$/;
  const match = birthDate.match(regex);
  if (!match) return null;

  const [_, day, month] = match;
  const d = parseInt(day);
  const m = parseInt(month);

  if ((m === 3 && d >= 21) || (m === 4 && d <= 19)) return "aries";
  if ((m === 4 && d >= 20) || (m === 5 && d <= 20)) return "taurus";
  if ((m === 5 && d >= 21) || (m === 6 && d <= 20)) return "gemini";
  if ((m === 6 && d >= 21) || (m === 7 && d <= 22)) return "cancer";
  if ((m === 7 && d >= 23) || (m === 8 && d <= 22)) return "leo";
  if ((m === 8 && d >= 23) || (m === 9 && d <= 22)) return "virgo";
  if ((m === 9 && d >= 23) || (m === 10 && d <= 22)) return "libra";
  if ((m === 10 && d >= 23) || (m === 11 && d <= 21)) return "scorpio";
  if ((m === 11 && d >= 22) || (m === 12 && d <= 21)) return "sagittarius";
  if ((m === 12 && d >= 22) || (m === 1 && d <= 19)) return "capricorn";
  if ((m === 1 && d >= 20) || (m === 2 && d <= 18)) return "aquarius";
  if ((m === 2 && d >= 19) || (m === 3 && d <= 20)) return "pisces";

  return null;
}